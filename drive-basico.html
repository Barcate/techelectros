<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechElectro Drive (Simula√ß√£o)</title>
    <link rel="stylesheet" href="drive.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

   
</head>
<body>

    <div class="drive-app-container">
        
        <header class="drive-header">
            <div class="drive-logo">
                <span class="logo-icon">‚ö°</span> <a href="inicio.html">TechElectro Drive</a>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Pesquisar no Drive...">
            </div>
        </header>

        <div class="drive-main-content">
            
            <aside class="drive-sidebar">
                
                <label for="fileUpload" class="new-btn">
                    + Novo (Upload)
                </label>
                <button class="new-btn create-doc-btn" id="createDocBtn">
                    + Criar Documento
                </button>
                
                <input type="file" id="fileUpload" style="display: none;">

                <nav class="sidebar-nav">
                    <a href="#" class="nav-item active">Meu Drive</a>
                    <a href="#" class="nav-item">Compartilhados Comigo</a>
                    <a href="#" class="nav-item">Recentes</a>
                    <a href="#" class="nav-item">Com Estrela</a>
                    <a href="#" class="nav-item">Lixeira</a>
                    <div class="storage-info">
                        <p>Armazenamento: 5.2 GB de 15 GB</p>
                        <div class="storage-bar"></div>
                    </div>
                </nav>
            </aside>

            <section class="file-view">
                <h2>Meu Drive</h2>
                
                <div class="file-list-header">
                    <span class="file-name-header">Nome</span>
                    <span class="file-owner-header">Propriet√°rio</span>
                    <span class="file-size-header">Tamanho</span>
                    <span class="file-date-header">√öltima Modifica√ß√£o</span>
                </div>
                
                <div class="file-list" id="fileListContainer">
                    
                    <div class="file-item document">
                        <a href="Documento de Teste de Colabora√ß√£o e Resposta.docx" class="file-name">
                            <span class="icon">üìÑ</span> Documento de Teste de Colabora√ß√£o
                        </a>
                        <span class="file-owner">Eu</span>
                        <span class="file-size">12 KB</span> 
                        <span class="file-date">Hoje, 10:30</span>
                    </div>

                    <div class="file-item pdf">
                        <span class="file-name"><span class="icon">üìÑ</span> Pol√≠tica de Privacidade 2025.pdf</span>
                        <span class="file-owner">Recursos Humanos</span>
                        <span class="file-size">1.2 MB</span>
                        <span class="file-date">Ontem, 14:00</span>
                    </div>
                    
                    <div class="file-item sheet">
                        <span class="file-name"><span class="icon">üìä</span> Or√ßamento Q4 - Tech.xlsx</span>
                        <span class="file-owner">Eu</span>
                        <span class="file-size">450 KB</span>
                        <span class="file-date">22/11/2025</span>
                    </div>

                    <div class="file-item doc">
                        <span class="file-name"><span class="icon">‚úçÔ∏è</span> Minuta Contrato Fornecedor Alpha.docx</span>
                        <span class="file-owner">Financeiro</span>
                        <span class="file-size">80 KB</span>
                        <span class="file-date">15/11/2025</span>
                    </div>
                    
                    <div class="file-item slide">
                        <span class="file-name"><span class="icon">üíª</span> Pitch de Vendas - Novo Produto.pptx</span>
                        <span class="file-owner">Marketing</span>
                        <span class="file-size">5.1 MB</span>
                        <span class="file-date">10/11/2025</span>
                    </div>
                    
                    <div class="file-item image">
                        <span class="file-name"><span class="icon">üñºÔ∏è</span> Logo_TechElectro_HD.png</span>
                        <span class="file-owner">Design</span>
                        <span class="file-size">200 KB</span>
                        <span class="file-date">01/11/2025</span>
                    </div>
                    
                </div>
            </section>

        </div>
    </div>

    <div id="creationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Criar Novo Documento</h2>
            <form id="creationForm">
                <div class="input-group-modal">
                    <label for="docName">Nome do Documento (.txt):</label>
                    <input type="text" id="docName" name="docName" placeholder="Ex: Relat√≥rio Mensal" required>
                </div>
                <button type="submit" class="training-btn">Criar</button>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Elementos de Upload ---
            const fileUploadInput = document.getElementById('fileUpload');
            const fileListContainer = document.getElementById('fileListContainer');
            
            // --- Elementos do Modal de Cria√ß√£o ---
            const createDocBtn = document.getElementById('createDocBtn');
            const creationModal = document.getElementById('creationModal');
            const closeBtn = document.querySelector('.close-btn');
            const creationForm = document.getElementById('creationForm');
            const docNameInput = document.getElementById('docName');


            // --- Fun√ß√µes Utilit√°rias ---
            
            function formatBytes(bytes, decimals = 2) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            }

            function getFileIcon(fileName) {
                const ext = fileName.split('.').pop().toLowerCase();
                switch (ext) {
                    case 'pdf': return 'üìÑ';
                    case 'xlsx':
                    case 'csv': return 'üìä';
                    case 'docx':
                    case 'doc': return '‚úçÔ∏è';
                    case 'pptx':
                    case 'ppt': return 'üíª';
                    case 'png':
                    case 'jpg':
                    case 'jpeg':
                    case 'gif': return 'üñºÔ∏è';
                    case 'txt': return 'üìù'; // √çcone para arquivos criados (.txt)
                    case 'folder': return 'üìÅ';
                    default: return 'üìé';
                }
            }

            // 1. Fun√ß√£o para renderizar um item de arquivo na lista
            function renderFileItem(fileInfo, isFolder = false) {
                const fileItem = document.createElement('div');
                fileItem.className = isFolder ? 'file-item folder' : `file-item ${fileInfo.name.split('.').pop().toLowerCase()}`;
                fileItem.setAttribute('data-filename', fileInfo.name);

                // Use o objeto Date diretamente para o formato de exibi√ß√£o
                const date = new Date(fileInfo.lastModifiedDate);
                const dateOptions = { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' };
                const formattedDate = date.toLocaleDateString('pt-BR', dateOptions).replace(',', ''); // Remove a v√≠rgula se o formato incluir

                const sizeDisplay = isFolder ? '-' : formatBytes(fileInfo.size);
                const icon = isFolder ? getFileIcon('folder') : getFileIcon(fileInfo.name);

                fileItem.innerHTML = `
                    <span class="file-name" title="${fileInfo.name}">
                        <span class="icon">${icon}</span> ${fileInfo.name}
                    </span>
                    <span class="file-owner">Eu</span>
                    <span class="file-size">${sizeDisplay}</span>
                    <span class="file-date">${formattedDate}</span>
                `;

                fileItem.addEventListener('click', () => {
                    alert(`Acessando: ${fileInfo.name}\nTipo: ${isFolder ? 'Pasta' : 'Arquivo'}\n--- Este √© um ambiente simulado ---`);
                });

                // Adiciona o item *depois* do cabe√ßalho da lista e da pasta est√°tica.
                // Usaremos prepend para que os novos arquivos apare√ßam no topo, logo abaixo do cabe√ßalho/pasta est√°tica.
                fileListContainer.prepend(fileItem); 
            }
            
            // 2. Evento de MUDAN√áA (Upload)
            fileUploadInput.addEventListener('change', function(event) {
                const files = event.target.files;
                if (files.length > 0) {
                    const file = files[0];
                    const fileInfo = {
                        name: file.name,
                        size: file.size,
                        lastModifiedDate: file.lastModified // Usar lastModified do objeto File
                    };

                    renderFileItem(fileInfo);
                    fileUploadInput.value = ''; // Limpa o input
                }
            });

            // 3. Eventos de ABERTURA/FECHAMENTO do Modal
            createDocBtn.addEventListener('click', () => {
                creationModal.style.display = 'flex';
                docNameInput.focus();
            });

            closeBtn.addEventListener('click', () => {
                creationModal.style.display = 'none';
            });

            // Fechar modal ao clicar fora
            window.addEventListener('click', (event) => {
                if (event.target == creationModal) {
                    creationModal.style.display = 'none';
                }
            });

            // 4. Evento de CRIA√á√ÉO (Submiss√£o do Formul√°rio)
            creationForm.addEventListener('submit', function(event) {
                event.preventDefault(); 
                
                let docName = docNameInput.value.trim();
                if (docName) {
                    // Assegura a extens√£o .txt (pseudo)
                    if (!docName.toLowerCase().endsWith('.txt')) {
                        docName += '.txt';
                    }

                    const newFileInfo = {
                        name: docName,
                        size: 0, 
                        lastModifiedDate: Date.now() // Data de cria√ß√£o/modifica√ß√£o atual
                    };

                    renderFileItem(newFileInfo);

                    // Limpa o formul√°rio e fecha o modal
                    docNameInput.value = '';
                    creationModal.style.display = 'none';
                    alert(`Documento "${newFileInfo.name}" criado com sucesso!`);
                }
            });
        });
    </script>
</body>
</html>